<?php
/**
 * Database Kota-kota Indonesia untuk Programmatic SEO
 * Dengan data unik per kota untuk konten yang lebih relevan
 */

$cities_indonesia = [
    // SUMATRA
    'aceh' => [
        'name' => 'Aceh', 
        'province' => 'Aceh', 
        'airport' => 'Sultan Iskandar Muda',
        'embarkasi' => 'Aceh',
        'timezone' => 'WIB',
        'landmark' => 'Masjid Baiturrahman',
        'population' => '5.3 juta',
        'majority_ethnic' => 'Aceh',
        'local_call' => 'Jamaah Aceh',
        'travel_time' => '8-10 jam',
        'local_food' => 'Mie Aceh',
        'climate' => 'Tropis',
    ],
    'banda-aceh' => [
        'name' => 'Banda Aceh', 
        'province' => 'Aceh', 
        'airport' => 'Sultan Iskandar Muda',
        'embarkasi' => 'Aceh',
        'timezone' => 'WIB',
        'landmark' => 'Masjid Raya Baiturrahman',
        'population' => '270 ribu',
        'majority_ethnic' => 'Aceh',
        'local_call' => 'Warga Kota Serambi Mekkah',
        'travel_time' => '8 jam',
        'local_food' => 'Kuah Beulangong',
        'climate' => 'Tropis Lembab',
    ],
    'medan' => [
        'name' => 'Medan', 
        'province' => 'Sumatera Utara', 
        'airport' => 'Kualanamu',
        'embarkasi' => 'Medan',
        'timezone' => 'WIB',
        'landmark' => 'Masjid Raya Al-Mashun',
        'population' => '2.5 juta',
        'majority_ethnic' => 'Batak, Melayu',
        'local_call' => 'Jamaah Sumut',
        'travel_time' => '9 jam',
        'local_food' => 'Bika Ambon',
        'climate' => 'Tropis',
    ],
    'padang' => [
        'name' => 'Padang', 
        'province' => 'Sumatera Barat', 
        'airport' => 'Minangkabau',
        'embarkasi' => 'Padang',
        'timezone' => 'WIB',
        'landmark' => 'Masjid Raya Sumbar',
        'population' => '950 ribu',
        'majority_ethnic' => 'Minangkabau',
        'local_call' => 'Urang Awak',
        'travel_time' => '9 jam',
        'local_food' => 'Rendang',
        'climate' => 'Tropis',
    ],
    'pekanbaru' => [
        'name' => 'Pekanbaru', 
        'province' => 'Riau', 
        'airport' => 'Sultan Syarif Kasim II',
        'embarkasi' => 'Pekanbaru',
        'timezone' => 'WIB',
        'landmark' => 'Masjid Agung An-Nur',
        'population' => '1.1 juta',
        'majority_ethnic' => 'Melayu',
        'local_call' => 'Jamaah Riau',
        'travel_time' => '8 jam',
        'local_food' => 'Gulai Ikan Patin',
        'climate' => 'Tropis',
    ],
    'batam' => [
        'name' => 'Batam', 
        'province' => 'Kepulauan Riau', 
        'airport' => 'Hang Nadim',
        'embarkasi' => 'Batam',
        'timezone' => 'WIB',
        'landmark' => 'Masjid Raya Batam',
        'population' => '1.2 juta',
        'majority_ethnic' => 'Melayu, Jawa',
        'local_call' => 'Warga Batam',
        'travel_time' => '7 jam',
        'local_food' => 'Otak-otak',
        'climate' => 'Tropis Maritim',
    ],
    'palembang' => [
        'name' => 'Palembang', 
        'province' => 'Sumatera Selatan', 
        'airport' => 'Sultan Mahmud Badaruddin II',
        'embarkasi' => 'Palembang',
        'timezone' => 'WIB',
        'landmark' => 'Masjid Agung Palembang',
        'population' => '1.8 juta',
        'majority_ethnic' => 'Melayu Palembang',
        'local_call' => 'Wong Kito Galo',
        'travel_time' => '8 jam',
        'local_food' => 'Pempek',
        'climate' => 'Tropis',
    ],
    'bandar-lampung' => [
        'name' => 'Bandar Lampung', 
        'province' => 'Lampung', 
        'airport' => 'Radin Inten II',
        'embarkasi' => 'Jakarta',
        'timezone' => 'WIB',
        'landmark' => 'Masjid Al-Furqon',
        'population' => '1 juta',
        'majority_ethnic' => 'Lampung, Jawa',
        'local_call' => 'Masyarakat Lampung',
        'travel_time' => '10 jam via Jakarta',
        'local_food' => 'Seruit',
        'climate' => 'Tropis',
    ],
    
    // JAWA
    'jakarta' => [
        'name' => 'Jakarta', 
        'province' => 'DKI Jakarta', 
        'airport' => 'Soekarno-Hatta',
        'embarkasi' => 'Jakarta',
        'timezone' => 'WIB',
        'landmark' => 'Masjid Istiqlal',
        'population' => '10.5 juta',
        'majority_ethnic' => 'Betawi, Jawa',
        'local_call' => 'Warga Jakarta',
        'travel_time' => '10 jam',
        'local_food' => 'Kerak Telor',
        'climate' => 'Tropis',
    ],
    'bogor' => [
        'name' => 'Bogor', 
        'province' => 'Jawa Barat', 
        'airport' => 'Soekarno-Hatta',
        'embarkasi' => 'Jakarta',
        'timezone' => 'WIB',
        'landmark' => 'Masjid Raya Bogor',
        'population' => '1.1 juta',
        'majority_ethnic' => 'Sunda',
        'local_call' => 'Urang Bogor',
        'travel_time' => '10 jam via CGK',
        'local_food' => 'Asinan Bogor',
        'climate' => 'Tropis Sejuk',
    ],
    'depok' => [
        'name' => 'Depok', 
        'province' => 'Jawa Barat', 
        'airport' => 'Soekarno-Hatta',
        'embarkasi' => 'Jakarta',
        'timezone' => 'WIB',
        'landmark' => 'Masjid Kubah Emas Dian Al-Mahri',
        'population' => '2.5 juta',
        'majority_ethnic' => 'Sunda, Betawi',
        'local_call' => 'Warga Depok',
        'travel_time' => '10 jam via CGK',
        'local_food' => 'Soto Betawi',
        'climate' => 'Tropis',
    ],
    'tangerang' => [
        'name' => 'Tangerang', 
        'province' => 'Banten', 
        'airport' => 'Soekarno-Hatta',
        'embarkasi' => 'Jakarta',
        'timezone' => 'WIB',
        'landmark' => 'Masjid Al-Azom',
        'population' => '2.1 juta',
        'majority_ethnic' => 'Sunda, Jawa',
        'local_call' => 'Warga Tangerang',
        'travel_time' => '10 jam',
        'local_food' => 'Laksa Tangerang',
        'climate' => 'Tropis',
    ],
    'bekasi' => [
        'name' => 'Bekasi', 
        'province' => 'Jawa Barat', 
        'airport' => 'Soekarno-Hatta',
        'embarkasi' => 'Jakarta',
        'timezone' => 'WIB',
        'landmark' => 'Masjid Agung Al-Barkah',
        'population' => '3 juta',
        'majority_ethnic' => 'Betawi, Sunda',
        'local_call' => 'Warga Bekasi',
        'travel_time' => '10 jam via CGK',
        'local_food' => 'Soto Tangkar',
        'climate' => 'Tropis',
    ],
    'bandung' => [
        'name' => 'Bandung', 
        'province' => 'Jawa Barat', 
        'airport' => 'Husein Sastranegara',
        'embarkasi' => 'Jakarta',
        'timezone' => 'WIB',
        'landmark' => 'Masjid Raya Bandung',
        'population' => '2.5 juta',
        'majority_ethnic' => 'Sunda',
        'local_call' => 'Urang Bandung',
        'travel_time' => '10 jam via CGK',
        'local_food' => 'Batagor',
        'climate' => 'Tropis Sejuk',
    ],
    'semarang' => [
        'name' => 'Semarang', 
        'province' => 'Jawa Tengah', 
        'airport' => 'Ahmad Yani',
        'embarkasi' => 'Solo',
        'timezone' => 'WIB',
        'landmark' => 'Masjid Agung Jawa Tengah',
        'population' => '1.8 juta',
        'majority_ethnic' => 'Jawa',
        'local_call' => 'Wong Semarang',
        'travel_time' => '9 jam',
        'local_food' => 'Lumpia Semarang',
        'climate' => 'Tropis',
    ],
    'solo' => [
        'name' => 'Solo', 
        'province' => 'Jawa Tengah', 
        'airport' => 'Adi Soemarmo',
        'embarkasi' => 'Solo',
        'timezone' => 'WIB',
        'landmark' => 'Masjid Agung Surakarta',
        'population' => '520 ribu',
        'majority_ethnic' => 'Jawa',
        'local_call' => 'Wong Solo',
        'travel_time' => '9 jam',
        'local_food' => 'Nasi Liwet',
        'climate' => 'Tropis',
    ],
    'yogyakarta' => [
        'name' => 'Yogyakarta', 
        'province' => 'DI Yogyakarta', 
        'airport' => 'Adisucipto',
        'embarkasi' => 'Solo',
        'timezone' => 'WIB',
        'landmark' => 'Masjid Gedhe Kauman',
        'population' => '430 ribu',
        'majority_ethnic' => 'Jawa',
        'local_call' => 'Wong Jogja',
        'travel_time' => '9 jam via Solo',
        'local_food' => 'Gudeg',
        'climate' => 'Tropis',
    ],
    'surabaya' => [
        'name' => 'Surabaya', 
        'province' => 'Jawa Timur', 
        'airport' => 'Juanda',
        'embarkasi' => 'Surabaya',
        'timezone' => 'WIB',
        'landmark' => 'Masjid Al-Akbar Surabaya',
        'population' => '2.9 juta',
        'majority_ethnic' => 'Jawa',
        'local_call' => 'Arek Suroboyo',
        'travel_time' => '9 jam',
        'local_food' => 'Rawon',
        'climate' => 'Tropis',
    ],
    'malang' => [
        'name' => 'Malang', 
        'province' => 'Jawa Timur', 
        'airport' => 'Abdul Rachman Saleh',
        'embarkasi' => 'Surabaya',
        'timezone' => 'WIB',
        'landmark' => 'Masjid Jami Malang',
        'population' => '900 ribu',
        'majority_ethnic' => 'Jawa',
        'local_call' => 'Arek Malang',
        'travel_time' => '9 jam via SUB',
        'local_food' => 'Bakso Malang',
        'climate' => 'Tropis Sejuk',
    ],
    'sidoarjo' => [
        'name' => 'Sidoarjo', 
        'province' => 'Jawa Timur', 
        'airport' => 'Juanda',
        'embarkasi' => 'Surabaya',
        'timezone' => 'WIB',
        'landmark' => 'Masjid Agung Sidoarjo',
        'population' => '2.2 juta',
        'majority_ethnic' => 'Jawa',
        'local_call' => 'Wong Sidoarjo',
        'travel_time' => '9 jam via Juanda',
        'local_food' => 'Bandeng Presto',
        'climate' => 'Tropis',
    ],
    
    // KALIMANTAN
    'pontianak' => [
        'name' => 'Pontianak', 
        'province' => 'Kalimantan Barat', 
        'airport' => 'Supadio',
        'embarkasi' => 'Jakarta',
        'timezone' => 'WIB',
        'landmark' => 'Masjid Jami Sultan Syarif',
        'population' => '670 ribu',
        'majority_ethnic' => 'Melayu, Dayak',
        'local_call' => 'Warga Pontianak',
        'travel_time' => '11 jam via CGK',
        'local_food' => 'Mie Kepiting',
        'climate' => 'Tropis Khatulistiwa',
    ],
    'banjarmasin' => [
        'name' => 'Banjarmasin', 
        'province' => 'Kalimantan Selatan', 
        'airport' => 'Syamsudin Noor',
        'embarkasi' => 'Banjarmasin',
        'timezone' => 'WITA',
        'landmark' => 'Masjid Raya Sabilal Muhtadin',
        'population' => '720 ribu',
        'majority_ethnic' => 'Banjar',
        'local_call' => 'Urang Banjar',
        'travel_time' => '10 jam',
        'local_food' => 'Soto Banjar',
        'climate' => 'Tropis',
    ],
    'balikpapan' => [
        'name' => 'Balikpapan', 
        'province' => 'Kalimantan Timur', 
        'airport' => 'Sultan Aji Muhammad Sulaiman',
        'embarkasi' => 'Balikpapan',
        'timezone' => 'WITA',
        'landmark' => 'Masjid Agung At-Taqwa',
        'population' => '700 ribu',
        'majority_ethnic' => 'Jawa, Bugis',
        'local_call' => 'Warga Balikpapan',
        'travel_time' => '10 jam',
        'local_food' => 'Kepiting Saus Padang',
        'climate' => 'Tropis',
    ],
    'samarinda' => [
        'name' => 'Samarinda', 
        'province' => 'Kalimantan Timur', 
        'airport' => 'APT Pranoto',
        'embarkasi' => 'Balikpapan',
        'timezone' => 'WITA',
        'landmark' => 'Masjid Baitul Muttaqin',
        'population' => '850 ribu',
        'majority_ethnic' => 'Kutai, Banjar',
        'local_call' => 'Wong Samarinda',
        'travel_time' => '10 jam via BPN',
        'local_food' => 'Amplang',
        'climate' => 'Tropis',
    ],
    
    // SULAWESI
    'makassar' => [
        'name' => 'Makassar', 
        'province' => 'Sulawesi Selatan', 
        'airport' => 'Sultan Hasanuddin',
        'embarkasi' => 'Makassar',
        'timezone' => 'WITA',
        'landmark' => 'Masjid Raya Makassar',
        'population' => '1.5 juta',
        'majority_ethnic' => 'Bugis, Makassar',
        'local_call' => 'Jamaah Makassar',
        'travel_time' => '10 jam',
        'local_food' => 'Coto Makassar',
        'climate' => 'Tropis',
    ],
    'manado' => [
        'name' => 'Manado', 
        'province' => 'Sulawesi Utara', 
        'airport' => 'Sam Ratulangi',
        'embarkasi' => 'Makassar',
        'timezone' => 'WITA',
        'landmark' => 'Masjid Raya Ahmad Yani',
        'population' => '450 ribu',
        'majority_ethnic' => 'Minahasa',
        'local_call' => 'Warga Manado',
        'travel_time' => '12 jam via UPG',
        'local_food' => 'Tinutuan',
        'climate' => 'Tropis',
    ],
    
    // BALI & NUSA TENGGARA
    'denpasar' => [
        'name' => 'Denpasar', 
        'province' => 'Bali', 
        'airport' => 'Ngurah Rai',
        'embarkasi' => 'Surabaya',
        'timezone' => 'WITA',
        'landmark' => 'Masjid Agung Ibnu Batutah',
        'population' => '950 ribu',
        'majority_ethnic' => 'Bali',
        'local_call' => 'Muslim Bali',
        'travel_time' => '10 jam via SUB/DPS',
        'local_food' => 'Ayam Betutu',
        'climate' => 'Tropis',
    ],
    'mataram' => [
        'name' => 'Mataram', 
        'province' => 'NTB', 
        'airport' => 'Lombok',
        'embarkasi' => 'Lombok',
        'timezone' => 'WITA',
        'landmark' => 'Islamic Center NTB',
        'population' => '480 ribu',
        'majority_ethnic' => 'Sasak',
        'local_call' => 'Jamaah Lombok',
        'travel_time' => '10 jam',
        'local_food' => 'Ayam Taliwang',
        'climate' => 'Tropis',
    ],
    
    // MALUKU & PAPUA
    'ambon' => [
        'name' => 'Ambon', 
        'province' => 'Maluku', 
        'airport' => 'Pattimura',
        'embarkasi' => 'Makassar',
        'timezone' => 'WIT',
        'landmark' => 'Masjid Raya Al-Fatah',
        'population' => '430 ribu',
        'majority_ethnic' => 'Ambon',
        'local_call' => 'Jamaah Ambon',
        'travel_time' => '13 jam via UPG',
        'local_food' => 'Papeda',
        'climate' => 'Tropis Maritim',
    ],
    'jayapura' => [
        'name' => 'Jayapura', 
        'province' => 'Papua', 
        'airport' => 'Sentani',
        'embarkasi' => 'Makassar',
        'timezone' => 'WIT',
        'landmark' => 'Masjid Raya Baiturrahim',
        'population' => '320 ribu',
        'majority_ethnic' => 'Papua, Jawa',
        'local_call' => 'Jamaah Papua',
        'travel_time' => '14 jam via UPG',
        'local_food' => 'Papeda',
        'climate' => 'Tropis',
    ],
];

/**
 * Fungsi untuk mendapatkan semua kota
 */
function getAllCities() {
    global $cities_indonesia;
    return $cities_indonesia;
}

/**
 * Fungsi untuk mendapatkan data kota berdasarkan slug
 */
function getCityBySlug($slug) {
    global $cities_indonesia;
    $slug = strtolower(trim($slug));
    return isset($cities_indonesia[$slug]) ? $cities_indonesia[$slug] : null;
}

/**
 * Advanced Spintax - Mengacak STRUKTUR paragraf, bukan hanya kata
 * Ini memastikan setiap kota punya struktur konten berbeda
 */
function advancedSpintax($text, $seed = null) {
    if ($seed !== null) {
        mt_srand($seed);
    }
    
    // Proses nested spintax
    $count = 0;
    while (preg_match('/{([^{}]+)}/', $text, $match)) {
        $options = explode('|', $match[1]);
        $replacement = $options[mt_rand(0, count($options) - 1)];
        $text = preg_replace('/' . preg_quote($match[0], '/') . '/', $replacement, $text, 1);
        $count++;
        if ($count > 100) break; // Prevent infinite loop
    }
    
    return $text;
}

/**
 * Generate paragraf dengan struktur berbeda per kota
 * Menggunakan data unik kota untuk konten yang lebih relevan
 */
function generateUniqueParagraphs($citySlug, $cityData) {
    $seed = crc32($citySlug);
    mt_srand($seed);
    
    // Template paragraf dengan STRUKTUR berbeda
    $introStructures = [
        // Struktur 1: Fokus pada lokasi
        "Bagi {masyarakat|warga|penduduk} {CITY} dan sekitarnya di {PROVINCE}, {kami|Ababil Tour} {hadir|siap|tersedia} sebagai {mitra|partner|solusi} perjalanan umrah {terpercaya|amanah|profesional}. Dengan {keberangkatan|penerbangan|jadwal} dari Bandara {AIRPORT}, perjalanan Anda {menjadi|akan terasa} lebih {mudah|nyaman|praktis}.",
        
        // Struktur 2: Fokus pada layanan
        "Ababil Tour {mempersembahkan|menghadirkan|menawarkan} {layanan|program|paket} umrah {istimewa|spesial|premium} untuk {LOCALCALL}. {Kami memahami|Kami tahu|Kami sadar} bahwa jamaah dari {CITY} {membutuhkan|memerlukan|menginginkan} {kenyamanan|kemudahan|pelayanan} {maksimal|terbaik|prima}, {karena itu|oleh sebab itu|maka dari itu} kami {menyediakan|memberikan} fasilitas {lengkap|komplit|terbaik}.",
        
        // Struktur 3: Fokus pada pengalaman
        "{Sudah|Telah} lebih dari {10|sepuluh|satu dekade} tahun kami {melayani|memberangkatkan|mendampingi} jamaah dari {CITY}, {PROVINCE}. {Pengalaman|Track record|Rekam jejak} kami {membuktikan|menunjukkan} {komitmen|dedikasi|keseriusan} dalam {memberikan|menghadirkan} {perjalanan ibadah|umrah} yang {berkesan|bermakna|tak terlupakan}.",
        
        // Struktur 4: Fokus pada komunitas lokal
        "Untuk {LOCALCALL} yang {bermimpi|berencana|ingin} {menunaikan|melaksanakan} ibadah umrah, {inilah|ini adalah} {kesempatan|peluang|waktu} {terbaik|tepat|yang pas}. {Berangkat|Start} dari {CITY} melalui Bandara {AIRPORT}, {nikmati|rasakan} {kemudahan|kenyamanan} {perjalanan|trip} bersama Ababil Tour.",
        
        // Struktur 5: Fokus pada keunggulan
        "{Mengapa|Kenapa} ribuan jamaah dari {CITY} {memilih|mempercayakan} umrahnya kepada kami? {Jawabannya sederhana|Alasannya jelas}: {pelayanan|layanan} {profesional|prima}, {harga|biaya} {transparan|jelas}, dan {bimbingan|pendampingan} {lengkap|menyeluruh} dari {CITY} hingga Tanah Suci.",
    ];
    
    $featureStructures = [
        // Struktur berbeda untuk features
        "{LOCALCALL} {berhak|layak|pantas} {mendapatkan|memperoleh} {layanan|pelayanan} umrah {terbaik|premium|istimewa}. Dengan {estimasi|perkiraan} waktu tempuh {TRAVELTIME} ke Tanah Suci via Embarkasi {EMBARKASI}, kami {memastikan|menjamin} {perjalanan|trip} Anda {lancar|smooth|nyaman}.",
        
        "Dari {CITY} dengan zona waktu {TIMEZONE}, jamaah {berangkat|terbang|take off} via Bandara {AIRPORT}. {Keunggulan|Kelebihan|Plus} kami: {hotel|akomodasi} {dekat|berjarak|lokasinya} dengan Masjidil Haram, {visa|dokumen} {resmi|legal}, dan {muthawif|pembimbing} {berpengalaman|profesional}.",
        
        "{Spesial|Khusus|Istimewa} untuk jamaah dari {PROVINCE}, kami {menyediakan|memberikan} {paket|program} dengan {keberangkatan|departure} {reguler|rutin} setiap bulan. Populasi {POPULATION} jiwa di {CITY} {menjadikan|membuat} kami {semakin|makin} {berkomitmen|berdedikasi} {melayani|mengabdi}.",
    ];
    
    $ctaStructures = [
        "{Jangan tunda|Segera|Langsung} {daftarkan|booking|reservasi} {diri Anda|umrah Anda}! {LOCALCALL} {sudah|telah} banyak yang {berangkat|percaya} bersama kami.",
        "{Hubungi|Kontak|Chat} kami {sekarang|hari ini} untuk {info|informasi} {paket|program} umrah dari {CITY}. {Gratis|Free} {konsultasi|tanya jawab}!",
        "{Wujudkan|Realisasikan} {impian|mimpi} umrah Anda dari {CITY}. Tim kami {siap|ready} {membantu|melayani} {LOCALCALL} {24 jam|setiap saat}.",
    ];
    
    // Pilih struktur random tapi konsisten per kota
    $introIdx = mt_rand(0, count($introStructures) - 1);
    $featureIdx = mt_rand(0, count($featureStructures) - 1);
    $ctaIdx = mt_rand(0, count($ctaStructures) - 1);
    
    // Replace placeholder dengan data kota
    $replacements = [
        '{CITY}' => $cityData['name'],
        '{PROVINCE}' => $cityData['province'],
        '{AIRPORT}' => $cityData['airport'],
        '{EMBARKASI}' => $cityData['embarkasi'] ?? 'Jakarta',
        '{TIMEZONE}' => $cityData['timezone'] ?? 'WIB',
        '{LANDMARK}' => $cityData['landmark'] ?? 'Masjid Agung',
        '{POPULATION}' => $cityData['population'] ?? '500 ribu',
        '{LOCALCALL}' => $cityData['local_call'] ?? 'Jamaah ' . $cityData['name'],
        '{TRAVELTIME}' => $cityData['travel_time'] ?? '10 jam',
        '{LOCALFOOD}' => $cityData['local_food'] ?? 'kuliner lokal',
    ];
    
    $intro = $introStructures[$introIdx];
    $features = $featureStructures[$featureIdx];
    $cta = $ctaStructures[$ctaIdx];
    
    // Apply replacements
    foreach ($replacements as $key => $value) {
        $intro = str_replace($key, $value, $intro);
        $features = str_replace($key, $value, $features);
        $cta = str_replace($key, $value, $cta);
    }
    
    // Apply spintax
    $intro = advancedSpintax($intro, $seed);
    $features = advancedSpintax($features, $seed + 1);
    $cta = advancedSpintax($cta, $seed + 2);
    
    return [
        'intro' => $intro,
        'features' => $features,
        'cta' => $cta,
    ];
}

/**
 * Generate headline unik per kota
 */
function generateUniqueHeadline($citySlug, $cityData) {
    $seed = crc32($citySlug);
    mt_srand($seed);
    
    $headlines = [
        "Paket Umrah {Terbaik|Premium|Berkualitas} dari {CITY}",
        "Travel Umrah {Terpercaya|Amanah|Resmi} untuk {LOCALCALL}",
        "Solusi Umrah {Lengkap|Komplit|Profesional} dari {CITY}, {PROVINCE}",
        "Biro Umrah {Berpengalaman|Profesional} Melayani {LOCALCALL}",
        "Perjalanan Umrah {Nyaman|Aman|Mudah} dari Bandara {AIRPORT}",
    ];
    
    $headline = $headlines[mt_rand(0, count($headlines) - 1)];
    
    $replacements = [
        '{CITY}' => $cityData['name'],
        '{PROVINCE}' => $cityData['province'],
        '{AIRPORT}' => $cityData['airport'],
        '{LOCALCALL}' => $cityData['local_call'] ?? 'Jamaah ' . $cityData['name'],
    ];
    
    foreach ($replacements as $key => $value) {
        $headline = str_replace($key, $value, $headline);
    }
    
    return advancedSpintax($headline, $seed);
}

/**
 * Generate estimasi keberangkatan dinamis
 */
function getNextDeparture($citySlug) {
    $months = ['Januari', 'Februari', 'Maret', 'April', 'Mei', 'Juni', 
               'Juli', 'Agustus', 'September', 'Oktober', 'November', 'Desember'];
    
    $currentMonth = (int)date('n');
    $nextMonth = ($currentMonth % 12) + 1;
    $year = $nextMonth < $currentMonth ? date('Y') + 1 : date('Y');
    
    // Variasi tanggal berdasarkan kota
    $seed = crc32($citySlug);
    mt_srand($seed);
    $dayVariation = mt_rand(5, 25);
    
    return $dayVariation . ' ' . $months[$nextMonth - 1] . ' ' . $year;
}

/**
 * Generate available slots
 */
function getAvailableSlots($citySlug) {
    $seed = crc32($citySlug . date('Y-m'));
    mt_srand($seed);
    return mt_rand(3, 15);
}

/**
 * Generate konten lengkap untuk landing page
 */
function generateCityContent($citySlug, $cityData) {
    $paragraphs = generateUniqueParagraphs($citySlug, $cityData);
    
    return [
        'headline' => generateUniqueHeadline($citySlug, $cityData),
        'intro' => $paragraphs['intro'],
        'features' => $paragraphs['features'],
        'cta' => $paragraphs['cta'],
    ];
}
?>
