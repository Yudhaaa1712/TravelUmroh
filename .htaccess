# Ababil Tour & Hajj - Apache Rewrite Rules
# Programmatic SEO untuk landing page kota

# Enable Rewrite Engine
RewriteEngine On

# Set base directory (sesuaikan jika di subfolder)
RewriteBase /TravelUmroh/

# Force HTTPS (uncomment untuk production)
# RewriteCond %{HTTPS} off
# RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# Remove www (uncomment untuk production)
# RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
# RewriteRule ^ https://%1%{REQUEST_URI} [R=301,L]

# ===== SKIP EXISTING FILES AND DIRECTORIES =====
# Jangan rewrite jika file atau folder sudah ada
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# ===== PROGRAMMATIC SEO ROUTES =====

# Sitemap XML
RewriteRule ^sitemap\.xml$ sitemap.php [L,QSA]

# Landing Page Kota: /travel-umrah-{city}
RewriteRule ^travel-umrah-([a-z0-9-]+)/?$ landing.php?city=$1 [L,QSA,NC]

# Alternative: /paket-umrah-{city}
RewriteRule ^paket-umrah-([a-z0-9-]+)/?$ landing.php?city=$1 [L,QSA,NC]

# Alternative: /umrah-{city}
RewriteRule ^umrah-([a-z0-9-]+)/?$ landing.php?city=$1 [L,QSA,NC]

# ===== CLEAN URL ROUTES =====

# Detail Paket: /paket/{slug}
RewriteRule ^paket/([a-z0-9-]+)/?$ detail-paket.php?slug=$1 [L,QSA,NC]

# Detail Blog: /blog/{slug}
RewriteRule ^blog/([a-z0-9-]+)/?$ detail-blog.php?slug=$1 [L,QSA,NC]

# ===== SECURITY =====

# Block access to sensitive files
<FilesMatch "^(koneksi|config|\.htaccess|\.htpasswd)">
    Order allow,deny
    Deny from all
</FilesMatch>

# Block access to includes folder from web
RewriteRule ^includes/ - [F,L]

# ===== CACHING =====

# Cache static assets
<IfModule mod_expires.c>
    ExpiresActive On
    ExpiresByType image/jpg "access plus 1 month"
    ExpiresByType image/jpeg "access plus 1 month"
    ExpiresByType image/png "access plus 1 month"
    ExpiresByType image/webp "access plus 1 month"
    ExpiresByType image/gif "access plus 1 month"
    ExpiresByType image/svg+xml "access plus 1 month"
    ExpiresByType text/css "access plus 1 week"
    ExpiresByType application/javascript "access plus 1 week"
    ExpiresByType application/x-javascript "access plus 1 week"
    ExpiresByType text/javascript "access plus 1 week"
    ExpiresByType application/pdf "access plus 1 month"
    ExpiresByType application/x-font-woff "access plus 1 month"
    ExpiresByType application/font-woff2 "access plus 1 month"
</IfModule>

# ===== COMPRESSION =====

<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/plain
    AddOutputFilterByType DEFLATE text/html
    AddOutputFilterByType DEFLATE text/xml
    AddOutputFilterByType DEFLATE text/css
    AddOutputFilterByType DEFLATE application/xml
    AddOutputFilterByType DEFLATE application/xhtml+xml
    AddOutputFilterByType DEFLATE application/rss+xml
    AddOutputFilterByType DEFLATE application/javascript
    AddOutputFilterByType DEFLATE application/x-javascript
    AddOutputFilterByType DEFLATE application/json
</IfModule>

